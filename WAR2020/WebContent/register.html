<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Chat application</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.0/jquery.min.js"></script>
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet">
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>

<script>

$(document).ready(function() {
	$("#btnRegister").click(function() {
		const username = $('#username').val();
		const password = $("#password").val();
		if (password === "" || password === undefined || username === "" || username === undefined) {
			alert("Please input username and password");
			return;
		}
		
		$.ajax({
			url: "rest/chat/users/register/",
			type: "POST",
			data: JSON.stringify({"username":username, "password":password}),
			contentType: "application/json",
			success: function(data) {
                alert("Registration done");
                sessionStorage.setItem('username', username);
                window.location.href='./home.html';
                console.log("User registered");
                return;
            },
            error: function(err) {
                alert("Error: username already exists");
                return;
            }	
		});
		
	});
		
});
</script>

</head>
<body>
	<center>
		<h2>ChatApp</h2>
		<table>
			<tr>
				<td><label>Username: </label></td>
				<td><input id="username" type="text" placeholder="username"/></td>
			</tr>
			<tr>
				<td><label>Password: </label></td>
				<td><input id="password" type="password" placeholder="password"></td>
			</tr>
			<tr>
				<td align="right" colspan="2"><button id="btnRegister">Register</button></td>
			</tr>
		</table>
	</center>
</body>
</html>